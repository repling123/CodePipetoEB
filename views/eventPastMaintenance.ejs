<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Past Events Maintenance</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="/Images/logo.png" type="image/png">
    <style>
        
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
        
    </style>
</head>
<body>
    <main>
        <a href="/eventMaintenance" class="top-right-button">Back to Event Maintenance</a>
        <h1 class="main-title">Past Events Maintenance</h1>
        <div class="table-container">
            <h2 class="section-title">Events to be Updated</h2>
            <form action="/addPastEvent" method="GET" style="display: flex; justify-content: center; margin: 20px 0;">
                <button class="edit-button" type="submit">Add Past Event</button>
              </form>

              <form action="/migratePastEvents" method="POST" style="display: flex; justify-content: center; margin: 20px 0;">
                <button class="edit-button" type="submit">Update Past Events</button>
            </form>

            <table class="events-table">
                <thead>
                    <tr>
                        <th>Edit</th>
                        <th>Event ID</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Duration</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Zip Code</th>
                        <th>Participants</th>
                        <th>Items Produced</th>
                        <th>Pockets</th>
                        <th>Collars</th>
                        <th>Envelopes</th>
                        <th>Vests</th>
                        <th>Completed Products</th>
                        <!-- <th>Request ID</th> -->
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% pastEvents.forEach(event => { %>
                        <% if (!event.updated) { %>
                            <tr>
                                <td>
                                    <form action="/editPastEvent/<%= event.eventid %>" method="GET" style="display:inline;">
                                    <button class="edit-button" type="submit">Edit</button>
                                  </form>
                                </td>
                                <td><%= event.eventid %></td>                                
                                <td><%= new Intl.DateTimeFormat('en-US').format(new Date(event.pasteventdate)) %></td>
                                <td><%= event.pasteventtime %></td>
                                <td><%= event.eventdurationhours %></td>
                                <td><%= event.pasteventaddress %></td>
                                <td><%= event.pasteventcity %></td>
                                <td><%= event.pasteventstate %></td>
                                <td><%= event.pasteventzipcode %></td>
                                <td><%= event.pasteventparticipants %></td>
                                <td><%= event.itemsproduced %></td>
                                <td><%= event.pockets %></td>
                                <td><%= event.collars %></td>
                                <td><%= event.envelopes %></td>
                                <td><%= event.vests %></td>
                                <td><%= event.completedproducts %></td>
                                <!-- <td><%= event.requestid %></td> -->
                                <td>                                    
                                    <form action="/deletePastEvent/<%= event.eventid %>" method="POST" style="display:inline;">
                                        <button class="delete-button" type="submit" onclick="return confirm('Are you sure you want to delete this record?');">Delete</button>
                                      </form>
                                    </td>
                            </tr>
                        <% } %>
                    <% }) %>
                </tbody>
            </table>
        </div>

        <div class="table-container">
            <h2 class="section-title">Updated Events</h2>
            <table class="events-table">
                <thead>
                    <tr>
                        <th>Edit</th>
                        <th>Event ID</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Duration</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Zip Code</th>
                        <th>Participants</th>
                        <th>Items Produced</th>
                        <th>Pockets</th>
                        <th>Collars</th>
                        <th>Envelopes</th>
                        <th>Vests</th>
                        <th>Completed Products</th>
                        <!-- <th>Request ID</th> -->
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% pastEvents.forEach(event => { %>
                        <% if (event.updated) { %>
                            <tr>
                                <td>                                    
                                        <form action="/editPastEvent/<%= event.eventid %>" method="GET" style="display:inline;">
                                        <button class="edit-button" type="submit">Edit</button>
                                      </form>                                    
                                </td>
                                <td><%= event.eventid %></td>
                                <td><%= new Intl.DateTimeFormat('en-US').format(new Date(event.pasteventdate)) %></td>
                                <td><%= event.pasteventtime %></td>
                                <td><%= event.eventdurationhours %></td>
                                <td><%= event.pasteventaddress %></td>
                                <td><%= event.pasteventcity %></td>
                                <td><%= event.pasteventstate %></td>
                                <td><%= event.pasteventzipcode %></td>
                                <td><%= event.pasteventparticipants %></td>
                                <td><%= event.itemsproduced %></td>
                                <td><%= event.pockets %></td>
                                <td><%= event.collars %></td>
                                <td><%= event.envelopes %></td>
                                <td><%= event.vests %></td>
                                <td><%= event.completedproducts %></td>
                                <!-- <td><%= event.requestid %></td> -->
                                <td >                               
                                <form action="/deletePastEvent/<%= event.eventid %>" method="POST" style="display:inline;">
                                    <button class="delete-button" type="submit" onclick="return confirm('Are you sure you want to delete this record?');">Delete</button>
                                  </form>
                                </td>
                            </tr>
                        <% } %>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </main>
</body>
</html>