<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Maintenance</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="/Images/logo.png" type="image/png">
    <style>
        
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
        
    </style>
</head>
<body>
    <main>        
        <a href="/loginLanding" class="top-left-button">Back</a>
        <a href="/eventPastMaintenance" class="top-right-button">Update/View Past Events</a>
        <h1>Event Maintenance</h1>

        <h2>Pending Event Requests</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Edit</th>
                        <th>Request ID</th>
                        <th>Contact Name</th>
                        <th>Email</th>
                        <th>Contact Phone Number</th>
                        <th>Event Date</th>
                        <th>Flexible Date</th>
                        <th>Event Start Time</th>
                        <th>Event Length</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Zipcode</th>
                        <th>Estimated Attendance</th>
                        <th>Preferred Activity</th>
                        <th>Sufficient Sewing Machines</th>
                        <th>Number of Sewers</th>
                        <th>Sufficient Tables</th>
                        <th>Table Type</th>
                        <th>Jen's Story</th>
                        <th>Other Info</th>
                        <th>Approved</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% pendingEvents.forEach(event => { %>
                        <tr>
                            <td>
                                <form action="/editEvent/<%= event.requestid %>" method="GET" style="display:inline;">
                                    <button class="edit-button" type="submit">Edit</button>
                                  </form>
                            </td>
                            <td><%= event.requestid %></td>
                            <td><%= event.contactfirstname %> <%= event.contactlastname %></td>
                            <td><%= event.contactemail %></td>
                            <td><%= event.contactnumber %></td>
                            <td><%= new Intl.DateTimeFormat('en-US').format(new Date(event.eventdate)) %></td>
                            <td><input type="checkbox" <%= event.flexibledate ? 'checked' : '' %> disabled></td>
                            <td><%= event.eventstarttime %></td>
                            <td><%= event.eventlength %></td>
                            <td><%= event.eventaddress %></td>
                            <td><%= event.eventcity %></td>
                            <td><%= event.eventstate %></td>
                            <td><%= event.eventzipcode %></td>
                            <td><%= event.estimatedattendance %></td>
                            <td><%= event.preferredactivity %></td>
                            <td><input type="checkbox" <%= event.sufficientsewmachines ? 'checked' : '' %> disabled></td>
                            <td><%= event.numsewers %></td>
                            <td><input type="checkbox" <%= event.sufficienttables ? 'checked' : '' %> disabled></td>
                            <td><%= event.tabletype %></td>
                            <td><input type="checkbox" <%= event.jenstory ? 'checked' : '' %> disabled></td>
                            <td><%= event.otherinfo %></td>
                            <td><input type="checkbox" <%= event.approved ? 'checked' : '' %> disabled></td>
                            <td>                               
                                <form action="/deleteEvent/<%= event.requestid %>" method="POST" style="display:inline;">
                                    <button class="delete-button" type="submit" onclick="return confirm('Are you sure you want to delete this record?');">Delete</button>
                                  </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>

            <form action="/addEvent" method="GET" style="display: flex; justify-content: center; margin: 20px 0;">
                <button class="edit-button" type="submit">Add Event</button>
              </form>

        </div>

        <h2>Approved Future Events</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Edit</th>
                        <th>Request ID</th>
                        <th>Contact Name</th>
                        <th>Email</th>
                        <th>Contact Phone Number</th>
                        <th>Event Date</th>
                        <th>Flexible Date</th>
                        <th>Event Start Time</th>
                        <th>Event Length</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Zipcode</th>
                        <th>Estimated Attendance</th>
                        <th>Preferred Activity</th>
                        <th>Sufficient Sewing Machines</th>
                        <th>Number of Sewers</th>
                        <th>Sufficient Tables</th>
                        <th>Table Type</th>
                        <th>Jen's Story</th>
                        <th>Other Info</th>
                        <th>Approved</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% approvedFutureEvents.forEach(event => { %>
                        <tr>
                            <td>
                                <form action="/editEvent/<%= event.requestid %>" method="GET" style="display:inline;">
                                    <button class="edit-button" type="submit">Edit</button>
                                  </form>  
                            </td>
                            <td><%= event.requestid %></td>
                            <td><%= event.contactfirstname %> <%= event.contactlastname %></td>
                            <td><%= event.contactemail %></td>
                            <td><%= event.contactnumber %></td>
                            <td><%= new Intl.DateTimeFormat('en-US').format(new Date(event.eventdate)) %></td>
                            <td><input type="checkbox" <%= event.flexibledate ? 'checked' : '' %> disabled></td>
                            <td><%= event.eventstarttime %></td>
                            <td><%= event.eventlength %></td>
                            <td><%= event.eventaddress %></td>
                            <td><%= event.eventcity %></td>
                            <td><%= event.eventstate %></td>
                            <td><%= event.eventzipcode %></td>
                            <td><%= event.estimatedattendance %></td>
                            <td><%= event.preferredactivity %></td>
                            <td><input type="checkbox" <%= event.sufficientsewmachines ? 'checked' : '' %> disabled></td>
                            <td><%= event.numsewers %></td>
                            <td><input type="checkbox" <%= event.sufficienttables ? 'checked' : '' %> disabled></td>
                            <td><%= event.tabletype %></td>
                            <td><input type="checkbox" <%= event.jenstory ? 'checked' : '' %> disabled></td>
                            <td><%= event.otherinfo %></td>
                            <td><input type="checkbox" <%= event.approved ? 'checked' : '' %> disabled></td>
                            <td>                                                              
                                <form action="/deleteEvent/<%= event.requestid %>" method="POST" style="display:inline;">
                                    <button class="delete-button" type="submit" onclick="return confirm('Are you sure you want to delete this record?');">Delete</button>
                                  </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
            <form action="/addEvent" method="GET" style="display: flex; justify-content: center; margin: 20px 0;">
                <button class="edit-button" type="submit">Add Event</button>
              </form>

        </div>
    </main>
</body>
</html>